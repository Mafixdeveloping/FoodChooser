<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FoodChooser</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .container {
            margin: 20px;
        }
        form {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>FoodChooser</h1>

        <!-- Form to generate random meal ideas -->
        <form id="random_meal_form" onsubmit="event.preventDefault(); displayRandomMeals();">
            <label for="meal_type">Choose a meal type:</label>
            <select id="meal_type" name="meal_type">
                <option value="breakfast">Breakfast</option>
                <option value="lunch">Lunch</option>
                <option value="dinner">Dinner</option>
            </select>
            <button type="submit">Generate Random Meals</button>
        </form>

        <div id="random_meals">
            <!-- Random meals will be displayed here -->
        </div>

        <!-- Form to edit meal lists -->
        <form id="edit_meal_form" onsubmit="event.preventDefault(); alert('Form submitted');">
            <h2>Edit Meal Lists</h2>
            <label for="new_meal">Add a new meal:</label>
            <input type="text" id="new_meal" name="new_meal">
            <button type="submit">Add Meal</button>
        </form>
    </div>

    <script>
        // CSV data converted to a JavaScript object
        const mealData = {
            breakfast: ["Pancakes", "Oatmeal", "Eggs Benedict"],
            breakfast_special: ["Pancakes Special", "Oatmeal Special", "Eggs Benedict Special"],
            lunch: ["Salad", "Sandwich", "Soup"],
            lunch_special: ["Salad Special", "Sandwich Special", "Soup Special"],
            noon: ["Pasta", "Pizza", "Burger"],
            noon_special: ["Pasta Special", "Pizza Special", "Burger Special"],
            dinner: ["Steak", "Fish", "Chicken"],
            dinner_special: ["Steak Special", "Fish Special", "Chicken Special"]
        };

        // Function to set cookies
        function setCookie(name, value, days) {
            const date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            const expires = "expires=" + date.toUTCString();
            document.cookie = name + "=" + value + ";" + expires + ";path=/";
        }

        // Function to store meal data in cookies
        function storeMealDataInCookies() {
            for (const [key, value] of Object.entries(mealData)) {
                setCookie(key, JSON.stringify(value), 7); // Store for 7 days
            }
        }

        // Function to get cookies
        function getCookie(name) {
            const value = "; " + document.cookie;
            const parts = value.split("; " + name + "=");
            if (parts.length === 2) return parts.pop().split(";").shift();
        }

        // Function to retrieve meal data from cookies
        function retrieveMealDataFromCookies() {
            const retrievedData = {};
            for (const key in mealData) {
                const cookieValue = getCookie(key);
                if (cookieValue) {
                    retrievedData[key] = JSON.parse(cookieValue);
                }
            }
            return retrievedData;
        }

        // Store meal data in cookies when the page loads
        window.onload = function() {
            storeMealDataInCookies();
            const retrievedData = retrieveMealDataFromCookies();
            console.log("Retrieved Data from Cookies:", retrievedData);
        };

        // Function to get random meals
        function getRandomMeals(mealType) {
            const meals = mealData[mealType];
            const shuffledMeals = meals.sort(() => 0.5 - Math.random());
            return shuffledMeals.slice(0, 3);
        }

        // Function to display random meals
        function displayRandomMeals() {
            const mealType = document.getElementById('meal_type').value;
            const randomMeals = getRandomMeals(mealType);
            const resultDiv = document.getElementById('random_meals');
            resultDiv.innerHTML = `<h2>Random ${mealType} Meals</h2><ul>${randomMeals.map(meal => `<li>${meal}</li>`).join('')}</ul>`;
        }
    </script>
</body>
</html>
